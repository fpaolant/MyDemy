<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout/layout}">
<body>
<div layout:fragment="content">
  <link th:href="@{/plugins/toastr/toastr.min.css}" rel="stylesheet"/>
  <script th:src="@{/plugins/toastr/toastr.min.js}"></script>
  <script>
    $(document).on('click', 'form button[type=submit]', function(e) {
        let isValid = ($("#password").val() === $("#cpassword").val());
        if(!isValid) {
          toastr.error('I campi password e conferma password non hanno lo stesso valore');
          e.preventDefault(); //prevent the default action
        }
    });
  </script>

  <div class="row mb-2">
    <div class="col-sm-6">
      <h1 class="m-0" th:text="#{common.cambiopassword.titolo}">Cambia password</h1>
    </div>
    <div class="col-sm-6">
      <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="/" th:href="@{/}">Home</a></li>
        <li class="breadcrumb-item active" th:text="#{common.cambiopassword.titolo}">Cambia password</li>
      </ol>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="card card-info">
        <div class="card-header">
          <h3 class="card-title" th:text="#{common.cambiopassword.sottotitolo}">Nuova password</h3>
        </div>
        <form th:action="@{/common/profilo/cambiopassword}"  class="form-horizontal" method="post">
          <div class="card-body">
            <div class="form-group row">
              <label for="password" class="col-sm-2 col-form-label" th:text="#{utente.password}"></label>
              <div class="col-sm-6">
                <input type="password" id="password" value="" name="password" class="form-control" autocomplete="off" minlength="5" maxlength="30" required/>
              </div>
            </div>
            <div class="form-group row">
              <label for="cpassword" class="col-sm-2 col-form-label" th:text="#{utente.confermapassword}"></label>
              <div class="col-sm-6">
                <input type="password" id="cpassword" value="" class="form-control" autocomplete="off" minlength="5" maxlength="30" required/>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button type="submit" class="btn btn-info" th:text="#{common.submit}"></button>
          </div>
        </form>
      </div>
    </div>
  </div>


</div>
</body>
</html>
